{
    "version": "1.84.1",
    "homepage": "https://github.com/zhongyang219/TrafficMonitor",
    "description": "Network monitoring floating window software on Windows. It can display the current network speed, CPU and memory usage. It also supports being embedded into the taskbar, theme changing and traffic statistics. Windows上的网络监控窗口软件。可显示当前网络速度/CPU/内存使用情况。支持嵌入任务栏/主题更改/流量统计",
    "license": "MIT",
    "suggest": {
        "vcredist": "extras/vcredist2022"
    },
    "architecture": {
        "64bit": {
            "url": "https://github.com/zhongyang219/TrafficMonitor/releases/download/V1.84.1/TrafficMonitor_V1.84.1_x64.zip",
            "hash": "7217c298d56936c58e36f8b98fcea50537ae935d57bc85c946c6385b6ffdd7cc"
        },
        "32bit": {
            "url": "https://github.com/zhongyang219/TrafficMonitor/releases/download/V1.84.1/TrafficMonitor_V1.84.1_x86.zip",
            "hash": "47c95d4bb315fc89353ec6f84fff31760c3c609282b076f9082e1ae37e86d9dc"
        }
    },
    "extract_dir": "TrafficMonitor",
    "shortcuts": [
        [
            "TrafficMonitor.exe",
            "TrafficMonitor"
        ]
    ],
    "pre_install": [
        ". \"$bucketsdir\\$bucket\\bin\\utils.ps1\"",
        "persist @(\"$dir\\plugins\") @(\"$persist_dir\\plugins\")",
        "$data=@(\"$dir\\config.ini\",\"$dir\\global_cfg.ini\")",
        "$persist=@(\"$persist_dir\\config.ini\",\"$persist_dir\\global_cfg.ini\")",
        "persist -file $data $persist"
    ],
    "post_install":[
        "explorer \"$dir\\TrafficMonitor.exe\""
    ],
    "pre_uninstall":[
        "$_bucket=(scoop bucket list | where-Object {$_.Source -match '(gitee|github).com/abgox/abgo_bucket'})[0].Name",
        ". \"$bucketsdir\\$_bucket\\bin\\utils.ps1\"",
        "$app_name=\"TrafficMonitor\"",
        "confirm $(data_replace $json.need_close)",
        "stop_process"
    ],
    "post_uninstall":[
        "$data=@(\"$env:APPData\\TrafficMonitor\")",
        "$data | ForEach-Object {",
        "   if (Test-Path($_)) {",
        "       Remove-Item -Force -Recurse $_",
        "       Write-Host \"Removing $_\" -f Yellow",
        "   }",
        "}"
    ],
    "checkver": {
        "github": "https://github.com/zhongyang219/TrafficMonitor"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://github.com/zhongyang219/TrafficMonitor/releases/download/V$version/TrafficMonitor_V$version_x64.zip"
            },
            "32bit": {
                "url": "https://github.com/zhongyang219/TrafficMonitor/releases/download/V$version/TrafficMonitor_V$version_x86.zip"
            }
        }
    }
}
